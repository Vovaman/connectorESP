connectorESP
============
Типовой коннектор, работающий с платформой Peresvet. Запускается на контроллере ESP32.  
Логика работы:

websocket
---------
При запуске коннектор по вебсокету устанавливает связь с платформой. Общение с платформой происходит по этому каналу.

Обмен данными с платформой
--------------------------
Коннектор имеет асинхронную процедуру - цикл обмена данными с платформой. 
В этом же цикле происходит обмен ping/pong с платформой.

Процедура управления
--------------------
Коннектор имеет основную асинхронную процедуру - цикл управления.

Самостоятельная работа
----------------------
Коннектор может работать самостоятельно, без платформы Peresvet.

Прерывания
----------
Не используем прерывания от пинов, чтение производим в цикле.

Константы
---------
Логика работы управляющей процедуры коннектора часто связана с использованием каких-либо констант. Поэтому для большей прозрачности работы, 
для удобства настройки в файле конфигурации вводится секция "consts", содержащая в виде ключ-значение имена констант и их значения.

**Пример**: контроллер управляет включением/выключением обогрева. Соответственно, в виде констант задаются две температуры: минимальная температура, при 
которой включается отопление и максимальная, при которой выключается.

prsTagSource
------------
Каждый тэг в платформе имеет атрибут `prsTagSource`. Атрибут предназначен для коннекторов и содержит конфигурацию, которая объясняет коннектору, как
получать данные для данного тэга.  
Соответственно, формат атрибута для каждого типа коннектора - свой.
Константа:

.. code-block:: JSON
   
   {
        "type": "const",
        "id": "const_name"
   }

Датчик температуры DS18B20:
{
    "type": "ds18B20",
    "id": [1, 2, 3, 4, 6, 7, 8]
    "pin": 15
}

config.json
===========
Файл `config.json` имеет вид:

{
    "id": "<connector's id>",
    "server": "ws://<server>:<port>",
    "consts": {
        "low_vent_temperature": 27,
        "high_vent_temperature": 32,
        "low_heat_temperature": 3,
        "high_heat_temperature": 5
    },
    "tags": {
        "temperature": {
        }
    }
}

start
=====
При запуске коннектор 


Обычный вход/выход 